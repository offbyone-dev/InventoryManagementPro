@model List<InventoryManagementPro.Models.Order>

@{
    ViewData["Title"] = "Orders";
}

<div class="page-header">
    <h2 class="page-title">Orders</h2>
    <div class="page-subtitle">Manage customer orders and statuses</div>
</div>

<div class="table-wrap">
    <div class="table-head table-toolbar">
        <div class="table-title">Orders List</div>

        <div class="table-tools">
            <form method="get" asp-action="Index" class="tool-search">
                <i class="bi bi-search"></i>
                <input name="q" value="@ViewBag.Q" placeholder="Search orders..." />
            </form>

            <a class="btn-primary-dark" asp-action="Create">
                <i class="bi bi-plus"></i> Create Order
            </a>
        </div>
    </div>

    <table>
        <thead>
            <tr>
                <th style="width:120px;">Order ID</th>
                <th>Customer</th>
                <th>Date</th>
                <th>Total</th>
                <th>Status</th>
                <th style="width:190px;">Actions</th>
            </tr>
        </thead>

        <tbody>
            @if (Model != null && Model.Any())
            {
                foreach (var o in Model)
                {
                    <tr>
                        <td>@o.OrderNo</td>
                        <td>@(o.CustomerName ?? "-")</td>
                        <td>@o.OrderDateUtc.ToLocalTime().ToString("dd MMM yyyy")</td>
                        <td>$@o.TotalAmount</td>
                        <td>
                            <span class="badge @(o.Status == "Completed" ? "in" : o.Status == "Pending" ? "low" : "out")">
                                @o.Status
                            </span>
                        </td>
                        <td class="actions-wide">
                            <a class="btn-action edit" asp-action="Details" asp-route-id="@o.Id">
                                <i class="bi bi-eye"></i> View
                            </a>

                            <form asp-action="Cancel" asp-route-id="@o.Id" method="post" style="display:inline;">
                                @Html.AntiForgeryToken()
                                <button type="submit" class="btn-action del">
                                    <i class="bi bi-trash"></i> Cancel
                                </button>
                            </form>
                        </td>
                    </tr>
                }
            }
            else
            {
                <tr>
                    <td colspan="6" style="text-align:center; opacity:.7;">No orders found</td>
                </tr>
            }
        </tbody>
    </table>

    <div class="table-foot">
        <span>Showing @Model?.Count() of @Model?.Count() entries</span>
    </div>
</div>
